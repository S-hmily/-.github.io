<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="1.ä»€ä¹ˆæ˜¯KNNç®—æ³•

KNN å…¨ç§°K-nearst neighborsï¼ŒKè¿‘é‚»ç®—æ³•ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„ç›‘ç£å­¦ä¹ ç®—æ³•ã€‚
KNNï¼ˆK-Nearest Neighborï¼‰ç®—æ³•æ˜¯æœºå™¨å­¦ä¹ ç®—æ³•ä¸­æœ€åŸºç¡€ã€æœ€ç®€å•çš„ç®—æ³•ä¹‹ä¸€ã€‚å®ƒæ—¢èƒ½ç”¨äºåˆ†ç±»ï¼Œä¹Ÿèƒ½ç”¨äºå›å½’ã€‚KN..." />
    <meta name="keywords" content="æœºå™¨å­¦ä¹ " />
    <link rel="stylesheet" href="https://s-hmily.github.io/media/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://s-hmily.github.io/styles/main.css">
    
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/default.min.css">
              
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>
    <script src="https://s-hmily.github.io/media/js/clipboard.min.js"></script>
    <link rel="stylesheet" href="https://s-hmily.github.io/media/css/live2d.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
    <!-- æœ€æ–°ç‰ˆæœ¬çš„ Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ -->
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css" rel="stylesheet">
    <!-- æ•°å­¦å…¬å¼ -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css"
        integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js"
        integrity="sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js"
        integrity="sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH" crossorigin="anonymous">
    </script>
    <script>
        renderMathInElement(document.body, {
            delimiters: [{
                    left: "$$",
                    right: "$$",
                    display: true
                },
                {
                    left: "$",
                    right: "$",
                    display: false
                }
            ]
        });
    </script>

    
    <title>å®å®å½“</title>
    
    <style>
        .markdownIt-TOC {
            padding-left: 2px;
            width: 100%;
        }
        .markdownIt-TOC li{
            padding-left: 2%;
        }
    </style>
    
</head>

<body>
    <!-- å“åº”å¼å¸ƒå±€ï¼Œé’ˆå¯¹PCç«¯å†…å®¹æ˜¾ç¤º -->
    <div id="content">
        <div class="nav-large">
            <div class="row">
                <div class="side"><head>
    <meta name="description" content="â€œä½ ä¹°çš„ä»€ä¹ˆä¹¦ï¼Ÿâ€
â€œã€Šè¾¹åŸã€‹â€
â€œC++è¿˜æ˜¯pythonï¼Ÿâ€
â€œæ²ˆä»æ–‡â€" />
    <link rel="stylesheet" href="https://s-hmily.github.io/media/css/bootstrap.min.css">
</head>


<body>
    



    
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <a class="navbar-brand" href="https://s-hmily.github.io"
                    style="font-size:21px">å®å®å½“&nbsp;&nbsp;|&nbsp;&nbsp;</a>
                <a class="navbar-brand" href=""
                    style="font-size:15px;font-family:kaiti">â€œä½ ä¹°çš„ä»€ä¹ˆä¹¦ï¼Ÿâ€
â€œã€Šè¾¹åŸã€‹â€
â€œC++è¿˜æ˜¯pythonï¼Ÿâ€
â€œæ²ˆä»æ–‡â€</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse">
                
                <div class="search nav navbar-nav" style="margin-top:8px">
                    <!-- <input type="text" class="search-input" placeholder="æ ‡é¢˜æœç´¢(â—'â—¡'â—)" /> -->
                    <input type="text" class="search-input" placeholder="æ ‡é¢˜æœç´¢ âš†_âš† ã¤â™¡">
                    <div class="search-results"></div>
                </div>
                
                <div class="search nav navbar-nav">
                <a title="text" onclick="document.getElementById('socialMenu').style.display='block'"><i><img class="social"
                    src="https://s-hmily.github.io/media/images/social.png" alt=""></i></a>
            </div>
            <ul class="nav navbar-nav" style="float: right;margin-right:5%">
                
                
                <li>
                    <a href="https://s-hmily.github.io" style="color:white">
                        é¦–é¡µ
                    </a>
                </li>
                
                
                
                <li>
                    <a href="/archives" style="color:white">
                        å½’æ¡£
                    </a>
                </li>
                
                
                
                <li>
                    <a href="https://s-hmily.github.io/tags" style="color:white">
                        æ ‡ç­¾
                    </a>
                </li>
                
                
                
                <li><a href="https://s-hmily.github.io/talk" style="color:white;">è¯´è¯´</a></li>
                
                  
                <li><a href="https://s-hmily.github.io/friends" style="color:white">å‹é“¾</a></li>
                
                  <li><img src="https://s-hmily.github.io/images/avatar.png?v=1595423969238" alt=""
                class="menutopavatar"></li>
            </ul>
        </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
    <div id="socialMenu" class="modal">
        <div class="animate">
            <div class="socialContainer">
                
                
                <a onclick="showqq()" style="cursor:pointer"><i><img class="icon" src="https://s-hmily.github.io/media/images/QQ.png"
                            alt=""></i></a>
                
                
                
                
                <a href="LB180928" target="_blank"><i><img class="icon"
                            src="https://s-hmily.github.io/media/images/wechat.png" alt=""></i></a>
                
                
            </div>
            <div id="qq" style="display:none">897438019</div>
        </div>
    </div>
    <!-- å¼•å…¥jQueryæ ¸å¿ƒjsæ–‡ä»¶ -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
    <script>
        var social = document.getElementById('socialMenu');
        // é¼ æ ‡ç‚¹å‡»æ¨¡å‹å¤–åŒºåŸŸå…³é—­ç™»å½•æ¡†
        window.onclick = function (event) {
            if (event.target == social) {
                social.style.display = "none";
            }
        }
    </script>
    
</body>
<script>
    //-------------------------------------------------æœç´¢
    // è·å–æœç´¢æ¡†ã€æœç´¢æŒ‰é’®ã€æ¸…ç©ºæœç´¢ã€ç»“æœè¾“å‡ºå¯¹åº”çš„å…ƒç´ 
    var searchInput = document.querySelector('.search-input');
    var searchResults = document.querySelector('.search-results');

    // ç”³æ˜ä¿å­˜æ–‡ç« çš„æ ‡é¢˜ã€é“¾æ¥ã€å†…å®¹çš„æ•°ç»„å˜é‡
    var searchValue = '',
        arrItems = [],
        arrLinks = [],
        arrTitles = [],
        arrResults = [],
        indexItem = [],
        itemLength = 0;
    var tmpDiv = document.createElement('div');
    tmpDiv.className = 'result-item';

    // ajax çš„å…¼å®¹å†™æ³•
    var xhr = new XMLHttpRequest() || new ActiveXObject('Microsoft.XMLHTTP');
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            xml = xhr.responseXML;
            arrItems = xml.getElementsByTagName('entry');
            itemLength = arrItems.length;
            // éå†å¹¶ä¿å­˜æ‰€æœ‰æ–‡ç« å¯¹åº”çš„æ ‡é¢˜ã€é“¾æ¥ã€å†…å®¹åˆ°å¯¹åº”çš„æ•°ç»„ä¸­
            // åŒæ—¶è¿‡æ»¤æ‰ HTML æ ‡ç­¾
            for (i = 0; i < itemLength; i++) {
                var link = arrItems[i].getElementsByTagName('link')[0];
                arrLinks[i] = link.getAttribute("href");
                arrTitles[i] = arrItems[i].getElementsByTagName('title')[0].
                childNodes[0].nodeValue.replace(/<.*?>/g, '');
            }
        }
    }

    // å¼€å§‹è·å–æ ¹ç›®å½•ä¸‹ feed.xml æ–‡ä»¶å†…çš„æ•°æ®
    xhr.open('get', '/atom.xml', true);
    xhr.send();



    // è¾“å…¥æ¡†å†…å®¹å˜åŒ–åå°±å¼€å§‹åŒ¹é…ï¼Œå¯ä»¥ä¸ç”¨ç‚¹æŒ‰é’®
    // ç»æµ‹è¯•ï¼Œonkeydown, onchange ç­‰æ–¹æ³•æ•ˆæœä¸å¤ªç†æƒ³ï¼Œ
    // å­˜åœ¨è¾“å…¥å»¶è¿Ÿç­‰é—®é¢˜ï¼Œæœ€åå‘ç°è§¦å‘ input äº‹ä»¶æœ€ç†æƒ³ï¼Œ
    // å¹¶ä¸”å¯ä»¥å¤„ç†ä¸­æ–‡è¾“å…¥æ³•æ‹¼å†™çš„å˜åŒ–
    searchInput.oninput = function () {
        setTimeout(searchConfirm, 0);
    }
    searchInput.onfocus = function () {
        searchResults.style.display = 'block';
    }

    function searchConfirm() {
        if (searchInput.value == '') {
            searchResults.style.display = 'none';
        } else if (searchInput.value.search(/^\s+$/) >= 0) {
            // æ£€æµ‹è¾“å…¥å€¼å…¨æ˜¯ç©ºç™½çš„æƒ…å†µ
            searchInit();
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerText = 'è¯·è¾“å…¥æœ‰æ•ˆå†…å®¹...';
            searchResults.appendChild(itemDiv);
        } else {
            // åˆæ³•è¾“å…¥å€¼çš„æƒ…å†µ
            searchInit();
            searchValue = searchInput.value;
            // åœ¨æ ‡é¢˜ã€å†…å®¹ä¸­æŸ¥æ‰¾
            searchMatching(arrTitles, searchValue);
        }
    }

    // æ¯æ¬¡æœç´¢å®Œæˆåçš„åˆå§‹åŒ–
    function searchInit() {
        arrResults = [];
        indexItem = [];
        searchResults.innerHTML = '';
        searchResults.style.display = 'block';
    }

    function searchMatching(arr1, input) {
        // å¿½ç•¥è¾“å…¥å¤§å°å†™
        input = new RegExp(input, 'i');
        // åœ¨æ‰€æœ‰æ–‡ç« æ ‡é¢˜ã€å†…å®¹ä¸­åŒ¹é…æŸ¥è¯¢å€¼
        for (i = 0; i < itemLength; i++) {
            if (arr1[i].search(input) !== -1) {
                var arr = arr1;
                indexItem.push(i); // ä¿å­˜åŒ¹é…å€¼çš„ç´¢å¼•
                var indexContent = arr[i].search(input);
                // æ­¤æ—¶ input ä¸º RegExp æ ¼å¼ /input/iï¼Œè½¬æ¢ä¸ºåŸ input å­—ç¬¦ä¸²é•¿åº¦
                var l = input.toString().length - 3;
                var step = 10;

                // å°†åŒ¹é…åˆ°å†…å®¹çš„åœ°æ–¹è¿›è¡Œé»„è‰²æ ‡è®°ï¼Œå¹¶åŒ…æ‹¬å‘¨å›´ä¸€å®šæ•°é‡çš„æ–‡æœ¬
                arrResults.push(arr[i].slice(indexContent - step, indexContent));
            }
        }

        // è¾“å‡ºæ€»å…±åŒ¹é…åˆ°çš„æ•°ç›®
        var totalDiv = tmpDiv.cloneNode(true);
        totalDiv.innerHTML = '<b>æ€»åŒ¹é…ï¼š' + indexItem.length + ' é¡¹<hr></b>';
        searchResults.appendChild(totalDiv);

        // æœªåŒ¹é…åˆ°å†…å®¹çš„æƒ…å†µ
        if (indexItem.length == 0) {
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerText = 'æœªåŒ¹é…åˆ°å†…å®¹...';
            searchResults.appendChild(itemDiv);
        }

        // å°†æ‰€æœ‰åŒ¹é…å†…å®¹è¿›è¡Œç»„åˆ
        for (i = 0; i < arrResults.length; i++) {
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerHTML = '<b>[' + arrTitles[indexItem[i]] +
                ']</b><p>' + arrResults[i] + "</p><hr />";
            itemDiv.setAttribute('onclick', 'changeHref(arrLinks[indexItem[' + i + ']])');
            searchResults.appendChild(itemDiv);
        }
    }

    function changeHref(href) {
        location.href = href;
    }

    function showqq() {
        var qq = document.getElementById("qq").innerHTML;
        if (qq != '')
            alert("åšä¸»çš„QQè”ç³»æ–¹å¼ä¸ºï¼š" + qq);
        else
            alert("åšä¸»æš‚æœªè®¾ç½®QQè”ç³»æ–¹å¼");
    }
</script></div>
    
    <div id="main" class="col-xs-12 col-sm-7" style="width:50%;margin-top:50px;left:27%">
        <link rel="stylesheet" href="https://s-hmily.github.io/media/css/font-awesome.css">
<style>

</style>

<body>
    <div class="allcontent" id="postdetail">
        <div class="postshow">
            
            <div class="postdetailimg" style="width:100%;overflow: hidden;display: none">
                <img src="https://s-hmily.github.io/post-images/knn-suan-fa-jie-xi-ji-qi-ying-yong.jpg" class="postimage" style="cursor:auto">
            </div>
            <div class="postinfo-detail">
                <div class="postdate"><i class="fa fa-calendar"></i>2020-07-22</div>
                <div class="poststatus postdate"><i class="fa fa-clock-o"></i> 12 min read</div>
                <div class="posttag">
                    
                    <a href="https://s-hmily.github.io/tag/lMYeCI_cf/" class="postlink">
                        <i class="fa fa-tag"></i> æœºå™¨å­¦ä¹ 
                    </a>
                    
                </div>
            </div>
            
        <div id="texttitle" style="text-align: center">
            <h2>KNNç®—æ³•è§£æåŠå…¶åº”ç”¨</h2>
            <!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
            <div id="pl" style="display:none">https://s-hmily.github.io/post/knn-suan-fa-jie-xi-ji-qi-ying-yong/</div>
            <div id="rootaddr" style="display:none">https://s-hmily.github.io</div>
            <span id="hotnum" class="leancloud_visitors" data-flag-title="KNNç®—æ³•è§£æåŠå…¶åº”ç”¨">
                <h4 class="readercount">çƒ­åº¦ğŸ”¥: <i class="leancloud-visitors-count">loading...</i></h4>
            </span>
        </div>
        <div class="text ">
            <h2 id="1ä»€ä¹ˆæ˜¯knnç®—æ³•">1.ä»€ä¹ˆæ˜¯KNNç®—æ³•</h2>
<ul>
<li>KNN å…¨ç§°K-nearst neighborsï¼ŒKè¿‘é‚»ç®—æ³•ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„ç›‘ç£å­¦ä¹ ç®—æ³•ã€‚</li>
<li>KNNï¼ˆK-Nearest Neighborï¼‰ç®—æ³•æ˜¯æœºå™¨å­¦ä¹ ç®—æ³•ä¸­æœ€åŸºç¡€ã€æœ€ç®€å•çš„ç®—æ³•ä¹‹ä¸€ã€‚å®ƒæ—¢èƒ½ç”¨äºåˆ†ç±»ï¼Œä¹Ÿèƒ½ç”¨äºå›å½’ã€‚KNNé€šè¿‡æµ‹é‡ä¸åŒç‰¹å¾å€¼ä¹‹é—´çš„è·ç¦»æ¥è¿›è¡Œåˆ†ç±»ã€‚</li>
<li>KNNçš„ä½œç”¨å°±æ˜¯å¯¹äºè¾“å…¥çš„ä»»æ„nç»´å‘é‡ï¼Œå¯ä»¥é¢„åˆ¤è¿™ä¸ªnç»´å‘é‡åœ¨æ•°æ®é›†ä¸­çš„çš„æ ‡ç­¾æˆ–è€…é¢„æµ‹å€¼ï¼Œå°†è¿™ä¸ªè¾“å…¥æ ·æœ¬è¿›è¡Œåˆ†ç±»</li>
<li>KNNç®—æ³•æ˜¯ä¸€ç§éå¸¸ç‰¹åˆ«çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€èˆ¬æ„ä¹‰ä¸Šçš„å­¦ä¹ è¿‡ç¨‹ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åˆ©ç”¨è®­ç»ƒæ•°æ®å¯¹ç‰¹å¾å‘é‡ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶å°†åˆ’åˆ†ç»“æœä½œä¸ºæœ€ç»ˆç®—æ³•æ¨¡å‹ã€‚å­˜åœ¨ä¸€ä¸ªæ ·æœ¬æ•°æ®é›†åˆï¼Œä¹Ÿç§°ä½œè®­ç»ƒæ ·æœ¬é›†ï¼Œå¹¶ä¸”æ ·æœ¬é›†ä¸­çš„æ¯ä¸ªæ•°æ®éƒ½å­˜åœ¨æ ‡ç­¾ï¼Œå³æˆ‘ä»¬çŸ¥é“æ ·æœ¬é›†ä¸­æ¯ä¸€æ•°æ®ä¸æ‰€å±åˆ†ç±»çš„å¯¹åº”å…³ç³»ã€‚</li>
<li>è¾“å…¥æ²¡æœ‰æ ‡ç­¾çš„æ•°æ®åï¼Œå°†è¿™ä¸ªæ²¡æœ‰æ ‡ç­¾çš„æ•°æ®çš„æ¯ä¸ªç‰¹å¾ä¸æ ·æœ¬é›†ä¸­çš„æ•°æ®å¯¹åº”çš„ç‰¹å¾è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæå–æ ·æœ¬ä¸­ç‰¹å¾æœ€ç›¸è¿‘çš„æ•°æ®ï¼ˆæœ€è¿‘é‚»ï¼‰çš„åˆ†ç±»æ ‡ç­¾ã€‚</li>
<li>ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åªé€‰æ‹©æ ·æœ¬æ•°æ®é›†ä¸­å‰kä¸ªæœ€ç›¸ä¼¼çš„æ•°æ®ï¼Œè¿™å°±æ˜¯KNNç®—æ³•ä¸­Kçš„ç”±æ¥ï¼Œé€šå¸¸kæ˜¯ä¸å¤§äº20çš„æ•´æ•°ã€‚æœ€åï¼Œé€‰æ‹©kä¸ªæœ€ç›¸ä¼¼æ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„ç±»åˆ«ï¼Œä½œä¸ºæ–°æ•°æ®çš„åˆ†ç±»ã€‚</li>
</ul>
<h2 id="2knnç®—æ³•åˆ†æ">2.KNNç®—æ³•åˆ†æ</h2>
<p>é¢„æµ‹è¿‡ç¨‹ï¼šå¯¹äºä¸€ä¸ªéœ€è¦é¢„æµ‹çš„è¾“å…¥å‘é‡xï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è®­ç»ƒæ•°æ®é›†ä¸­å¯»æ‰¾kä¸ªä¸å‘é‡xæœ€è¿‘çš„å‘é‡çš„é›†åˆï¼Œç„¶åæŠŠxçš„ç±»åˆ«è¿›è¡Œé¢„æµ‹ï¼ŒæŠŠxçš„ç±»åˆ«é¢„æµ‹ä¸ºè¿™kä¸ªæ ·æœ¬ä¸­ç±»åˆ«æœ€å¤šçš„é‚£ä¸€ç±»<br>
<img src="https://s-hmily.github.io/post-images/1595388102943.png" alt="" loading="lazy"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼ŒÏ‰1ã€Ï‰2ã€Ï‰3åˆ†åˆ«ä»£è¡¨è®­ç»ƒé›†ä¸­çš„ä¸‰ä¸ªç±»åˆ«ã€‚å…¶ä¸­ï¼Œä¸xuæœ€ç›¸è¿‘çš„5ä¸ªç‚¹ï¼ˆk=5ï¼‰å¦‚å›¾ä¸­ç®­å¤´æ‰€æŒ‡ï¼Œå¾ˆæ˜æ˜¾ä¸å…¶æœ€ç›¸è¿‘çš„5ä¸ªç‚¹ä¸­æœ€å¤šçš„ç±»åˆ«ä¸ºÏ‰1ï¼Œå› æ­¤ï¼ŒKNNç®—æ³•å°†xuçš„ç±»åˆ«é¢„æµ‹ä¸ºÏ‰1ã€‚</p>
<p>ç®—æ³•æ‰§è¡Œçš„æ­¥éª¤ï¼š</p>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›†</p>
<figure data-type="image" tabindex="1"><img src="https://s-hmily.github.io/post-images/1595388158811.png" alt="" loading="lazy"></figure>
<p>å…¶ä¸­ï¼šÂ <br>
<img src="https://s-hmily.github.io/post-images/1595388162236.png" alt="" loading="lazy"></p>
<p>ä¸ºnç»´çš„å®ä¾‹ç‰¹å¾å‘é‡ã€‚Â <br>
<img src="https://s-hmily.github.io/post-images/1595388168096.png" alt="" loading="lazy"></p>
<p>ä¸ºå®ä¾‹çš„ç±»åˆ«ï¼Œå…¶ä¸­ï¼Œi=1,2,â€¦,Nï¼Œé¢„æµ‹å®ä¾‹xã€‚</p>
<p>è¾“å‡ºï¼šé¢„æµ‹å®ä¾‹xæ‰€å±ç±»åˆ«yã€‚</p>
<p>ç®—æ³•æ‰§è¡Œæ­¥éª¤ï¼š</p>
<ol>
<li>
<p>æ ¹æ®ç»™å®šçš„è·ç¦»é‡åº¦æ–¹æ³•ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨æ¬§æ°è·ç¦»ï¼‰åœ¨è®­ç»ƒé›†Tä¸­æ‰¾å‡ºä¸xæœ€ç›¸è¿‘çš„kä¸ªæ ·æœ¬ç‚¹ï¼Œå¹¶å°†è¿™kä¸ªæ ·æœ¬ç‚¹æ‰€è¡¨ç¤ºçš„é›†åˆè®°ä¸ºN_k(x)ï¼›</p>
</li>
<li>
<p>æ ¹æ®å¦‚ä¸‹æ‰€ç¤ºçš„å¤šæ•°æŠ•ç¥¨çš„åŸåˆ™ç¡®å®šå®ä¾‹xæ‰€å±ç±»åˆ«yï¼š</p>
</li>
</ol>
<figure data-type="image" tabindex="2"><img src="https://s-hmily.github.io/post-images/1595388203338.png" alt="" loading="lazy"></figure>
<p>ä¸Šå¼ä¸­Iä¸ºæŒ‡ç¤ºå‡½æ•°ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://s-hmily.github.io/post-images/1595388211534.png" alt="" loading="lazy"></figure>
<h2 id="3å½±å“knnç®—æ³•çš„å› ç´ ">3.å½±å“KNNç®—æ³•çš„å› ç´ </h2>
<ul>
<li><strong>Kå€¼çš„é€‰æ‹©</strong>ï¼šKå€¼çš„ç¡®å®šä¸æ ·æœ¬æœ€ç»ˆçš„åˆ¤å®šç»“æœæœ‰å¾ˆå¤§çš„å…³ç³»ï¼›K å€¼å¤ªå°ä¼šä½¿å¾— KNN ç®—æ³•å®¹æ˜“è¿‡æ‹Ÿåˆã€‚åä¹‹ï¼Œå¤ªå¤§åˆ™ä¼šæ¬ æ‹Ÿåˆã€‚å› æ­¤ï¼Œä¸€èˆ¬é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼é€‰å– K å€¼ã€‚</li>
<li><strong>è·ç¦»çš„åº¦é‡</strong>ï¼šé€šè¿‡ä»€ä¹ˆæ ·çš„è·ç¦»ç†è®ºç¡®å®šæœ€è¿‘é‚»çš„æ ·æœ¬æ•°æ®ã€‚ä¸€èˆ¬ä½¿ç”¨æ¬§æ°è·ç¦»(æ¬§å‡ é‡Œå¾—è·ç¦»)ï¼›</li>
<li><strong>å†³ç­–è§„åˆ™</strong>ï¼šä»¥ä»€ä¹ˆæ ·çš„å†³ç­–è§„åˆ™æ¥ç¡®å®šæœ€ç»ˆçš„è¾“å‡ºç»“æœã€‚ å¦‚ä¸Šå›¾çš„å†³ç­–è§„åˆ™æ˜¯é€šè¿‡â€œå¤šæ•°è¡¨å†³æ³•â€å¯¹ç»“æœè¿›è¡Œåˆ†ç±»ã€‚<br>
åœ¨åˆ†ç±»é¢„æµ‹æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨â€œå¤šæ•°è¡¨å†³æ³•â€æˆ–â€œåŠ æƒå¤šæ•°è¡¨å†³æ³•â€ï¼›<br>
è€Œåœ¨åšå›å½’é¢„æµ‹æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨â€œå¹³å‡å€¼æ³•â€æˆ–â€œåŠ æƒå¹³å‡å€¼æ³•â€ï¼Œè¿™ä¹Ÿæ˜¯KNNåšåˆ†ç±»ä¸å›å½’æœ€ä¸»è¦çš„åŒºåˆ«ã€‚<br>
è¿™é‡Œæ‰€è¯´çš„åŠ æƒä¸€èˆ¬æƒ…å†µä¸‹é‡‡ç”¨æƒé‡å’Œè·ç¦»æˆåæ¯”çš„æ–¹å¼æ¥è®¡ç®—ã€‚</li>
</ul>
<h3 id="31kå€¼çš„é€‰æ‹©">3.1Kå€¼çš„é€‰æ‹©</h3>
<p>KNNç®—æ³•ä¸­åªæœ‰ä¸€ä¸ªè¶…å‚æ•°kï¼Œkå€¼çš„ç¡®å®šå¯¹KNNç®—æ³•çš„é¢„æµ‹ç»“æœæœ‰ç€è‡³å…³é‡è¦çš„å½±å“ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸‹kå€¼å¤§å°å¯¹ç®—æ³•ç»“æœçš„å½±å“ä»¥åŠä¸€èˆ¬æƒ…å†µä¸‹å¦‚ä½•é€‰æ‹©kå€¼ã€‚</p>
<p>å¦‚æœkå€¼æ¯”è¾ƒå°ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨è¾ƒå°çš„é¢†åŸŸå†…è®­ç»ƒæ ·æœ¬å¯¹å®ä¾‹è¿›è¡Œé¢„æµ‹ã€‚è¿™æ—¶ï¼Œç®—æ³•çš„è¿‘ä¼¼è¯¯å·®ï¼ˆApproximate Errorï¼‰ä¼šæ¯”è¾ƒå°ï¼Œå› ä¸ºåªæœ‰ä¸è¾“å…¥å®ä¾‹ç›¸è¿‘çš„è®­ç»ƒæ ·æœ¬æ‰ä¼šå¯¹é¢„æµ‹ç»“æœèµ·ä½œç”¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼šç®—æ³•çš„ä¼°è®¡è¯¯å·®æ¯”è¾ƒå¤§ï¼Œé¢„æµ‹ç»“æœä¼šå¯¹è¿‘é‚»ç‚¹ååˆ†æ•æ„Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¿‘é‚»ç‚¹æ˜¯å™ªå£°ç‚¹çš„è¯ï¼Œé¢„æµ‹å°±ä¼šå‡ºé”™ã€‚å› æ­¤ï¼Œkå€¼è¿‡å°å®¹æ˜“å¯¼è‡´KNNç®—æ³•çš„è¿‡æ‹Ÿåˆã€‚</p>
<p>åŒç†ï¼Œå¦‚æœkå€¼é€‰æ‹©è¾ƒå¤§çš„è¯ï¼Œè·ç¦»è¾ƒè¿œçš„è®­ç»ƒæ ·æœ¬ä¹Ÿèƒ½å¤Ÿå¯¹å®ä¾‹é¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ã€‚è¿™æ—¶å€™ï¼Œæ¨¡å‹ç›¸å¯¹æ¯”è¾ƒé²æ£’ï¼Œä¸ä¼šå› ä¸ºä¸ªåˆ«å™ªå£°ç‚¹å¯¹æœ€ç»ˆé¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿååˆ†æ˜æ˜¾ï¼šç®—æ³•çš„è¿‘é‚»è¯¯å·®ä¼šåå¤§ï¼Œè·ç¦»è¾ƒè¿œçš„ç‚¹ï¼ˆä¸é¢„æµ‹å®ä¾‹ä¸ç›¸ä¼¼ï¼‰ä¹Ÿä¼šåŒæ ·å¯¹é¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ï¼Œä½¿å¾—é¢„æµ‹ç»“æœäº§ç”Ÿè¾ƒå¤§åå·®ï¼Œæ­¤æ—¶æ¨¡å‹å®¹æ˜“å‘ç”Ÿæ¬ æ‹Ÿåˆã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å®é™…å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼é€‰å–kå€¼ã€‚é€šè¿‡ä»¥ä¸Šåˆ†æå¯çŸ¥ï¼Œä¸€èˆ¬kå€¼é€‰å¾—æ¯”è¾ƒå°ï¼Œæˆ‘ä»¬ä¼šåœ¨è¾ƒå°èŒƒå›´å†…é€‰å–kå€¼ï¼ŒåŒæ—¶æŠŠæµ‹è¯•é›†ä¸Šå‡†ç¡®ç‡æœ€é«˜çš„é‚£ä¸ªç¡®å®šä¸ºæœ€ç»ˆçš„ç®—æ³•è¶…å‚æ•°kã€‚</p>
<h3 id="32è·ç¦»çš„åº¦é‡">3.2è·ç¦»çš„åº¦é‡</h3>
<p>æ ·æœ¬ç©ºé—´å†…çš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»é‡åº¦è¡¨ç¤ºä¸¤ä¸ªæ ·æœ¬ç‚¹ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼šè·ç¦»è¶ŠçŸ­ï¼Œè¡¨ç¤ºç›¸ä¼¼ç¨‹åº¦è¶Šé«˜ï¼›åä¹‹ï¼Œç›¸ä¼¼ç¨‹åº¦è¶Šä½ã€‚</p>
<p>å¸¸ç”¨çš„è·ç¦»é‡åº¦æ–¹å¼åŒ…æ‹¬ï¼š</p>
<p>é—µå¯å¤«æ–¯åŸºè·ç¦»</p>
<p>æ¬§æ°è·ç¦»</p>
<p>æ›¼å“ˆé¡¿è·ç¦»</p>
<p>åˆ‡æ¯”é›ªå¤«è·ç¦»</p>
<p>ä½™å¼¦è·ç¦»</p>
<p>ä¸€èˆ¬æœºå™¨å­¦ä¹ ä½¿ç”¨çš„æ˜¯æ¬§æ°è·ç¦»ï¼Œå…·ä½“å…¬å¼å¦‚ä¸‹å›¾ï¼š<br>
å¹³é¢å‡ ä½•è·ç¦»å…¬å¼ï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388350432.png" alt="" loading="lazy"><br>
ç«‹ä½“å‡ ä½•è·ç¦»å…¬å¼ï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388373349.png" alt="" loading="lazy"><br>
æœºå™¨å­¦ä¹ ä¸­é«˜çº¬åº¦æ ·æœ¬çš„æ¬§æ‹‰è·ç¦»è¡¨è¾¾ï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388486154.png" alt="" loading="lazy"><br>
æœºå™¨å­¦ä¹ ä¸­é«˜çº¬åº¦æ ·æœ¬çš„æ¬§æ‹‰è·ç¦»è¡¨è¾¾åŒ–ç®€æˆï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388542389.png" alt="" loading="lazy"></p>
<h2 id="4knnä»£ç çš„å®ç°">4.KNNä»£ç çš„å®ç°</h2>
<pre><code>import numpy as np
import matplotlib.pyplot as plt
from collections import Counter
from math import sqrt

#åŸå§‹æ ¼å¼çš„æ•°æ®
raw_data_X = [[3.393533211, 2.331273381],
              [3.110073483, 1.781539638],
              [1.343808831, 3.368360954],
              [3.582294042, 4.679179110],
              [2.280362439, 2.866990263],
              [7.423436942, 4.696522875],
              [5.745051997, 3.533989803],
              [9.172168622, 2.511101045],
              [7.792783481, 3.424088941],
              [7.939820817, 0.791637231]
             ]
raw_data_y = [0, 0, 0, 0, 0, 1, 1, 1, 1, 1]


#è½¬åŒ–ä¸ºæ–¹ä¾¿numpyå¤„ç†çš„ndarrayç±»å‹æ•°æ®
X_train=np.array(raw_data_X )
y_train=np.array(raw_data_y)

#æŠŠè®­ç»ƒæ•°æ®ç”¨æ•£ç‚¹å›¾ç”»å‡ºæ¥ï¼Œå…¶ä¸­y_train==0,0è¡¨ç¤ºå–å‡ºy_trainä¸­ç±»åˆ«ä¸º0çš„æ ·æœ¬ç‚¹çš„ç¬¬1åˆ—
#y_train==0,1è¡¨ç¤ºå–å‡ºy_trainä¸­ç±»åˆ«ä¸º0çš„æ ·æœ¬ç‚¹çš„ç¬¬2åˆ—ï¼Œä»¥æ­¤ç±»æ¨
plt.scatter(X_train[y_train==0,0],X_train[y_train==0,1],color='r',s=120)
plt.scatter(X_train[y_train==1,0],X_train[y_train==1,1],color='b',s=120)


#xè¡¨ç¤ºæ–°æ¥çš„æ ·æœ¬ç‚¹ï¼Œå¹¶å°†å…¶ä¹Ÿç”»åœ¨æ•£ç‚¹å›¾ä¸Š
x=np.array([5.876543210,2.491234560])
plt.scatter(x[0],x[1],color='g',s=120)

#distances=[]
#for x_train in X_train:
#    d=sqrt(np.sum((x-x_train)**2))
#    distances.append(d)


#35--38è¡Œçš„å¾ªç¯è¯­å¥å¯ä»¥ç”¨ç¬¬43è¡Œçš„åˆ—è¡¨è¡¨è¾¾å¼å–ä»£ï¼Œ
#æ­¤å¤„ä¸ºæ±‚æ–°æ¥æ ·æœ¬ç‚¹ä¸è®­ç»ƒæ ·æœ¬ä¸­æ‰€æœ‰ç‚¹çš„æ¬§æ°è·ç¦»
distances=[sqrt(np.sum((x-x_train)**2)) for x_train in X_train]
print(distances)
print('===========================')

#ç”¨argsortæ–¹æ³•æ±‚è·ç¦»å¯¹åº”çš„ç´¢å¼•å€¼
nearest=np.argsort(distances)
print(nearest)

k=5

#æ±‚è·ç¦»æ–°æ¥æ ·æœ¬ç‚¹è·ç¦»æœ€è¿‘çš„Kä¸ªæ ·æœ¬çš„ç±»åˆ«åˆ†åˆ«æ˜¯ä»€ä¹ˆã€0 or 1ã€‘
topK_y=[y_train[i] for i in nearest[:k]]
print('===========================')
print(topK_y)

#ç”¨Counteræ–¹æ³•åˆ†åˆ«ç»Ÿè®¡å‡ºç±»åˆ«ä¸º0å’Œ1çš„ä¸ªæ•°
votes=Counter(topK_y)
print(votes)

#ç”¨most_commonæ±‚å‡ºç¥¨æ•°æœ€å¤šçš„é‚£ä¸ªæ ·æœ¬ç‚¹çš„ç±»åˆ«
print(votes.most_common(1)[0][0])
</code></pre>
<h2 id="5knnç®—æ³•çš„åº”ç”¨åŸºäºsklearnè‡ªå¸¦çš„æ•°æ®">5.KNNç®—æ³•çš„åº”ç”¨ï¼ˆåŸºäºsklearnè‡ªå¸¦çš„æ•°æ®ï¼‰</h2>
<ul>
<li>åŸºäºsklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®</li>
<li>åŸºäºmakeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†</li>
</ul>
<h3 id="51é’ˆå¯¹ç”¨sklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®">5.1é’ˆå¯¹ç”¨sklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®</h3>
<pre><code>import numpy as np
import matplotlib.pyplot as plt

from sklearn.datasets import make_blobs
from sklearn.neighbors import KNeighborsClassifier

#å¯¼å…¥sklearnåŒ…ä¸­è‡ªå¸¦çš„çº¢é…’æ•°æ®é›†æ‰€éœ€æ¨¡å—
from sklearn.datasets import load_wine

#å¯¼å…¥æ•°æ®é›†æ‹†åˆ†å·¥å…·åŒ…
from sklearn.model_selection import train_test_split

#å¯¼å…¥å…¥sklearnåŒ…ä¸­è‡ªå¸¦çš„çº¢é…’æ•°æ®é›†
wine_dataset=load_wine()

#æŸ¥çœ‹çº¢é…’æ•°æ®é›†ä¸­çš„é”®ã€‚å…¶å®çº¢é…’æ•°æ®é›†æœ¬è´¨ä¸Šæ˜¯ä¸€ç§Bunchå¯¹è±¡
#ã€æœ‰ç‚¹ç±»ä¼¼äºpythonä¸­çš„å­—å…¸ã€‘ï¼Œå®ƒåŒ…æ‹¬é”®ï¼ˆkeysï¼‰å’Œæ•°å€¼(values)
print('çº¢é…’æ•°æ®é›†ä¸­çš„KEYé”®ï¼š{}'.format(wine_dataset.keys()))

#æŸ¥çœ‹çº¢é…’æ•°æ®é›†ä¸­çš„æ ·æœ¬æ•°
#print('æ•°æ®æ¦‚å†µ:{}'.format(wine_dataset['data'].shape))

#æŸ¥çœ‹çº¢é…’æ•°æ®é›†ä¸­çš„ç®€å•æè¿°
#print(wine_dataset['DESCR'])

#æŠŠçº¢é…’æ•°æ®é›†ä¸­çš„æ•°æ®æ‹†åˆ†ä¸ºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ï¼Œä»¥åŠå…¶ç›¸åº”çš„ç±»åˆ«
X_train,X_test,y_train,y_test=train_test_split(wine_dataset['data'],wine_dataset['target'],random_state=2)
print('X_train shape:{}'.format(X_train.shape))
print('X_test shape:{}'.format(X_test.shape))


knn=KNeighborsClassifier(n_neighbors=4)
print('ç”¨æ¨¡å‹å¯¹ç»™å®šçš„è®­ç»ƒæ•°æ®è¿›è¡Œæ‹Ÿåˆã€å­¦ä¹ ï¼Œè®­ç»ƒã€‘')

#æŠŠè®­ç»ƒæ•°æ®å–‚ç»™knnï¼Œå¸®åŠ©å…¶æ‹Ÿåˆå‡ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹
knn.fit(X_train,y_train)
print(knn)

print('æ¨¡å‹è®­ç»ƒå¥½ä»¥åç»è¿‡æµ‹è¯•æ•°æ®é›†æµ‹è¯•åçš„å¾—åˆ†:{:.2f}'.format(knn.score(X_test,y_test)))

#è¾“å…¥ä¸€ä¸ªæ–°çš„æ•°æ®ç‚¹
X_new=np.array([[13.2,2.77,2.51,18.5,96.6,1.04,2.55,0.57,1.47,6.2,1.05,3.33,820]])

prediction=knn.predict(X_new)
print('=======================')

#ç»™å‡ºæ–°æ ·æœ¬çš„åˆ†ç±»ç»“æœ
print('æ–°æ‹¿åˆ°çš„çº¢é…’ç»è¿‡æœ¬æ¨¡å‹é¢„æµ‹åçš„ç±»åˆ«æ˜¯:{}'.format(wine_dataset['target_names'][prediction]))
</code></pre>
<h3 id="52é’ˆå¯¹ç”¨makeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†">5.2é’ˆå¯¹ç”¨makeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†</h3>
<pre><code>import numpy as np
import matplotlib.pyplot as plt

#å¯¼å…¥sklearnåŒ…ä¸­ç”¨makeæ–¹æ³•ç”Ÿæˆèšç±»ç”¨çš„æ•°æ®é›†æ‰€éœ€è¦ç”¨åˆ°çš„æ¨¡å—
from sklearn.datasets import make_blobs

#å¯¼å…¥sklearnåŒ…ä¸­KNNåˆ†ç±»ç®—æ³•æ‰€éœ€æ¨¡å—
from sklearn.neighbors import KNeighborsClassifier


#ç”¨make_blobsæ–¹æ³•ç”Ÿæˆæ•°æ®é›†ï¼Œæ ·æœ¬æ•°ä¸º200ï¼Œæ ·æœ¬ç±»åˆ«ä¸º2ï¼Œéšæœºç”Ÿæˆå™¨çš„ç§å­æ•°ä¸º8
data=make_blobs(n_samples=200,centers=2,random_state=8)

#æŠŠæ•°æ®é›†ä¸­çš„è®­ç»ƒæ•°æ®åŠè®­ç»ƒæ•°æ®çš„ç±»åˆ«åˆ†åˆ«èµ‹ç»™XåŠy
X,y=data

#ç”»æ•£ç‚¹å›¾ï¼Œå…¶ä¸­c=yçš„ä½œç”¨æ˜¯è®©ä¸¤ç±»æ ·æœ¬åˆ†åˆ«æ˜¾ç¤ºä¸åŒé¢œè‰²ä»¥ä¾¿äºåŒºåˆ†ï¼Œcmapæ˜¯é¢œè‰²æ˜ å°„è¡¨å±æ€§
plt.scatter(X[:,0],X[:,1],c=y,cmap=plt.cm.winter)

#ç”ŸæˆKNNåˆ†ç±»å™¨çš„ä¸€ä¸ªå®ä¾‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯KNNæœºå™¨å­¦ä¹ ç®—æ³•
clf=KNeighborsClassifier()

#æŠŠè®­ç»ƒæ•°æ®å–‚ç»™clfï¼Œå¸®åŠ©å…¶æ‹Ÿåˆå‡ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹
clf.fit(X,y)



x_min,x_max=X[:,0].min()-1,X[:,0].max()+1
y_min,y_max=X[:,1].min()-1,X[:,1].max()+1

#ç”Ÿæˆç½‘ç»œæ•°æ®ï¼Œç›®çš„æ˜¯ä¸ºä¸‹é¢ç”»åˆ†ç•Œçº¿çš„è¯­å¥pcolormeshæä¾›æ•°æ®
xx,yy=np.meshgrid(np.arange(x_min,x_max,0.02),
            np.arange(y_min,y_max,0.02))

#np.c_çš„ä½œç”¨æ˜¯æŒ‰è¡Œè¿æ¥ä¸¤ä¸ªçŸ©é˜µï¼Œravel()ä½œç”¨æ˜¯ä½¿çŸ©é˜µé™ç»´ï¼Œåœ¨è¿™é‡Œå°±æ˜¯å±•å¼€æˆä¸€ä¸ªä¸€ç»´çŸ©é˜µ
Z=clf.predict(np.c_[xx.ravel(),yy.ravel()])

#é€šè¿‡reshapeæ–¹æ³•ä½¿Zçš„ç»´åº¦å’Œxxä¸€è‡´
Z=Z.reshape(xx.shape)

#ç”»åˆ†ç•Œçº¿
plt.pcolormesh(xx,yy,Z,cmap=plt.cm.Pastel1)
plt.scatter(X[:,0],X[:,1],c=y,cmap=plt.cm.winter)

plt.scatter(6.75,5.25,c='r',s=200,marker='*')

#ç»™å‡ºåˆ†ç±»ç»“æœ
print('æ–°æ•°æ®ç‚¹çš„åˆ†ç±»ç»“æœæ˜¯ï¼š',clf.predict([[6.75,5.25]]))

#ç»™å‡ºåˆ†ç±»æ­£ç¡®ç‡ï¼Œä½†è¿™ä¸ªä¾‹å­ä¸­çš„æ•°æ®é›†ç”±äºæˆ‘æ²¡æœ‰æŠŠæ•°æ®è¿›ä¸€æ­¥
#åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œæ‰€ä»¥å…¶å®ç»“æœæ„ä¹‰ä¸å¤ªå¤§
print('è¯¥æ¨¡å‹çš„æ­£ç¡®ç‡æ˜¯:{:.2f}'.format(clf.score(X,y)))
</code></pre>

        </div>
        
        <div class="prev-post">
            ä¸Šä¸€ç¯‡
            <a href="https://s-hmily.github.io/post/k-means-ju-lei-suan-fa-yuan-li-ji-qi-shi-xian/">
                K-meansèšç±»ç®—æ³•åŸç†åŠå…¶å®ç°
            </a>
        </div>
        
        
        <div class="next-post">
            ä¸‹ä¸€ç¯‡
            <a href="https://s-hmily.github.io/post/juan-ji-shen-jing-wang-luo-de-ying-yong-shi-xian-mnist-shou-xie-ti-shi-bie/">
                å·ç§¯ç¥ç»ç½‘ç»œçš„åº”ç”¨-å®ç°MNISTæ‰‹å†™ä½“è¯†åˆ«
            </a>
        </div>
        
    </div>
    </div>
</body>
<script>
    var t_img; // å®šæ—¶ï¿½?
    var isLoad = true; // æ§åˆ¶å˜é‡
    isImgLoad(function () {
        // åŠ è½½å®Œæˆ
        $('.postdetailimg').css("display", "block");
    });
    // åˆ¤æ–­å›¾ç‰‡åŠ è½½çš„å‡½ï¿½?
    function isImgLoad(callback) {
        // æ³¨æ„æˆ‘çš„å›¾ç‰‡ç±»åéƒ½æ˜¯coverï¼Œå› ä¸ºæˆ‘ï¿½?éœ€è¦ï¿½?ï¿½ç†coverã€‚å…¶å®ƒå›¾ç‰‡å¯ä»¥ä¸ç®¡ï¿½?
        // æŸ¥æ‰¾æ‰€æœ‰å°é¢å›¾ï¼Œè¿­ä»£ï¿½?ï¿½ç†
        $('.postdetailimg').each(function () {
            // æ‰¾åˆ°ï¿½?0å°±å°†isLoadè®¾ä¸ºfalseï¼Œå¹¶é€€å‡ºeach
            if (this.height === 0) {
                isLoad = false;
                return false;
            }
        });
        // ä¸ºtrueï¼Œæ²¡æœ‰å‘ç°ä¸º0çš„ã€‚åŠ è½½å®Œï¿½?
        if (isLoad) {
            clearTimeout(t_img); // æ¸…é™¤å®šæ—¶ï¿½?
            // å›è°ƒå‡½æ•°
            callback();
            // ä¸ºfalseï¼Œå› ä¸ºæ‰¾åˆ°äº†æ²¡æœ‰åŠ è½½å®Œæˆçš„å›¾ï¼Œå°†è°ƒç”¨å®šæ—¶å™¨é€’å½’
        } else {
            isLoad = true;
            t_img = setTimeout(function () {
                isImgLoad(callback); // é€’å½’ï¿½?ï¿½?
            }, 500); // æˆ‘è¿™é‡Œï¿½?ï¿½ç½®çš„æ˜¯500ï¿½?ç§’å°±ï¿½?æä¸€æ¬¡ï¼Œï¿½?ä»¥è‡ªå·±è°ƒï¿½?
        }
    }

    //æ–‡ç« é˜…è¯»çƒ­åº¦
    var pl = $("#pl").html();
    var rootaddr = $("#rootaddr").html();
    pl = pl.replace(rootaddr, "");
    $("#hotnum").attr('id', pl);
</script>
        <div name="comment" style="background: white">
            <div class="commentcontainer">
                
                <p>è¯·åˆ°å®¢æˆ·ç«¯â€œä¸»é¢˜--è‡ªå®šä¹‰é…ç½®--valineâ€ä¸­å¡«å…¥IDå’ŒKEY</p>
                
            </div>
        </div>
    </div>
     
                <div class="toc-container">
                    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1%E4%BB%80%E4%B9%88%E6%98%AFknn%E7%AE%97%E6%B3%95">1.ä»€ä¹ˆæ˜¯KNNç®—æ³•</a></li>
<li><a href="#2knn%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90">2.KNNç®—æ³•åˆ†æ</a></li>
<li><a href="#3%E5%BD%B1%E5%93%8Dknn%E7%AE%97%E6%B3%95%E7%9A%84%E5%9B%A0%E7%B4%A0">3.å½±å“KNNç®—æ³•çš„å› ç´ </a>
<ul>
<li><a href="#31k%E5%80%BC%E7%9A%84%E9%80%89%E6%8B%A9">3.1Kå€¼çš„é€‰æ‹©</a></li>
<li><a href="#32%E8%B7%9D%E7%A6%BB%E7%9A%84%E5%BA%A6%E9%87%8F">3.2è·ç¦»çš„åº¦é‡</a></li>
</ul>
</li>
<li><a href="#4knn%E4%BB%A3%E7%A0%81%E7%9A%84%E5%AE%9E%E7%8E%B0">4.KNNä»£ç çš„å®ç°</a></li>
<li><a href="#5knn%E7%AE%97%E6%B3%95%E7%9A%84%E5%BA%94%E7%94%A8%E5%9F%BA%E4%BA%8Esklearn%E8%87%AA%E5%B8%A6%E7%9A%84%E6%95%B0%E6%8D%AE">5.KNNç®—æ³•çš„åº”ç”¨ï¼ˆåŸºäºsklearnè‡ªå¸¦çš„æ•°æ®ï¼‰</a>
<ul>
<li><a href="#51%E9%92%88%E5%AF%B9%E7%94%A8sklearn%E8%87%AA%E5%B8%A6%E7%9A%84%E7%BA%A2%E9%85%92%E6%95%B0%E6%8D%AE">5.1é’ˆå¯¹ç”¨sklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®</a></li>
<li><a href="#52%E9%92%88%E5%AF%B9%E7%94%A8make%E6%96%B9%E6%B3%95%E7%94%9F%E6%88%90%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86">5.2é’ˆå¯¹ç”¨makeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
    </div>
    </div>
    <div class="toggleContainer">
        <div class="toggle">
            <i class="fas fa-angle-double-up"></i>
        </div>
    </div>
    <div id="bg">
    </div>
    <div id="bgchoice" style="display: none">link</div>
    
    <div id="bgurl" style="display:none">https://pic2.zhimg.com/80/v2-bcbb1a4f932ab78c198b0a99af266d4e_720w.jpg?source=1940ef5c</div>
       
    </div>
    <!-- å“åº”å¼å¸ƒå±€ï¼Œé’ˆå¯¹æ‰‹æœºç«¯å†…å®¹æ˜¾ç¤º -->
    <div class="nav-small">
        <head>
  <!-- å¼•å…¥Bootstrapæ ¸å¿ƒæ ·å¼æ–‡ä»¶ -->
  <link rel="stylesheet" href="https://s-hmily.github.io/media/css/bootstrap.min.css">
</head>

<body>
  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
          data-target="#barmenu" aria-expanded="false" id="barbutton">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://s-hmily.github.io">å®å®å½“&nbsp;&nbsp;|</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="barmenu">
        <ul class="nav navbar-nav">
          
          
          <li>
            <a href="https://s-hmily.github.io">
              é¦–é¡µ
            </a>
          </li>
          
          
          
          <li>
            <a href="/archives">
              å½’æ¡£
            </a>
          </li>
          
          
          
          <li>
            <a href="https://s-hmily.github.io/tags">
              æ ‡ç­¾
            </a>
          </li>
          
          
          
            <li><a href="https://s-hmily.github.io/talk">è¯´è¯´</a></li>
            
          
          <li><a href="https://s-hmily.github.io/friends">å‹é“¾</a></li>

          
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>


  <!-- å¼•å…¥jQueryæ ¸å¿ƒjsæ–‡ä»¶ -->
  <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
  <script>
  var btstate = false;
  var bt = $("#barbutton");
  var bm = $("#barmenu");
  bt.click(function(){
    dropdown();
  })
  function dropdown(){
    console.log(btstate);
    //ä¸‹æ‹‰
    if(btstate==false){
      bt.removeClass("collapsed");
      bt.attr("aria-expanded","true");
      bm.attr("aria-expanded","true")
      bm.fadeIn(700);
      btstate = true;
    }
    else{
      bt.addClass("collapsed");
      bt.attr("aria-expanded","false");
      bm.removeClass("in");
      bm.hide();
      bm.attr("aria-expanded","false");
      btstate = false;
    }
  }
  </script> 
</body>
    <div style="margin-top:30px"></div>
    <link rel="stylesheet" href="https://s-hmily.github.io/media/css/font-awesome.css">
<style>

</style>

<body>
    <div class="allcontent" id="postdetail">
        <div class="postshow">
            
            <div class="postdetailimg" style="width:100%;overflow: hidden;display: none">
                <img src="https://s-hmily.github.io/post-images/knn-suan-fa-jie-xi-ji-qi-ying-yong.jpg" class="postimage" style="cursor:auto">
            </div>
            <div class="postinfo-detail">
                <div class="postdate"><i class="fa fa-calendar"></i>2020-07-22</div>
                <div class="poststatus postdate"><i class="fa fa-clock-o"></i> 12 min read</div>
                <div class="posttag">
                    
                    <a href="https://s-hmily.github.io/tag/lMYeCI_cf/" class="postlink">
                        <i class="fa fa-tag"></i> æœºå™¨å­¦ä¹ 
                    </a>
                    
                </div>
            </div>
            
        <div id="texttitle" style="text-align: center">
            <h2>KNNç®—æ³•è§£æåŠå…¶åº”ç”¨</h2>
            <!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
            <div id="pl" style="display:none">https://s-hmily.github.io/post/knn-suan-fa-jie-xi-ji-qi-ying-yong/</div>
            <div id="rootaddr" style="display:none">https://s-hmily.github.io</div>
            <span id="hotnum" class="leancloud_visitors" data-flag-title="KNNç®—æ³•è§£æåŠå…¶åº”ç”¨">
                <h4 class="readercount">çƒ­åº¦ğŸ”¥: <i class="leancloud-visitors-count">loading...</i></h4>
            </span>
        </div>
        <div class="text ">
            <h2 id="1ä»€ä¹ˆæ˜¯knnç®—æ³•">1.ä»€ä¹ˆæ˜¯KNNç®—æ³•</h2>
<ul>
<li>KNN å…¨ç§°K-nearst neighborsï¼ŒKè¿‘é‚»ç®—æ³•ï¼Œæ˜¯ä¸€ç§å…¸å‹çš„ç›‘ç£å­¦ä¹ ç®—æ³•ã€‚</li>
<li>KNNï¼ˆK-Nearest Neighborï¼‰ç®—æ³•æ˜¯æœºå™¨å­¦ä¹ ç®—æ³•ä¸­æœ€åŸºç¡€ã€æœ€ç®€å•çš„ç®—æ³•ä¹‹ä¸€ã€‚å®ƒæ—¢èƒ½ç”¨äºåˆ†ç±»ï¼Œä¹Ÿèƒ½ç”¨äºå›å½’ã€‚KNNé€šè¿‡æµ‹é‡ä¸åŒç‰¹å¾å€¼ä¹‹é—´çš„è·ç¦»æ¥è¿›è¡Œåˆ†ç±»ã€‚</li>
<li>KNNçš„ä½œç”¨å°±æ˜¯å¯¹äºè¾“å…¥çš„ä»»æ„nç»´å‘é‡ï¼Œå¯ä»¥é¢„åˆ¤è¿™ä¸ªnç»´å‘é‡åœ¨æ•°æ®é›†ä¸­çš„çš„æ ‡ç­¾æˆ–è€…é¢„æµ‹å€¼ï¼Œå°†è¿™ä¸ªè¾“å…¥æ ·æœ¬è¿›è¡Œåˆ†ç±»</li>
<li>KNNç®—æ³•æ˜¯ä¸€ç§éå¸¸ç‰¹åˆ«çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸€èˆ¬æ„ä¹‰ä¸Šçš„å­¦ä¹ è¿‡ç¨‹ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯åˆ©ç”¨è®­ç»ƒæ•°æ®å¯¹ç‰¹å¾å‘é‡ç©ºé—´è¿›è¡Œåˆ’åˆ†ï¼Œå¹¶å°†åˆ’åˆ†ç»“æœä½œä¸ºæœ€ç»ˆç®—æ³•æ¨¡å‹ã€‚å­˜åœ¨ä¸€ä¸ªæ ·æœ¬æ•°æ®é›†åˆï¼Œä¹Ÿç§°ä½œè®­ç»ƒæ ·æœ¬é›†ï¼Œå¹¶ä¸”æ ·æœ¬é›†ä¸­çš„æ¯ä¸ªæ•°æ®éƒ½å­˜åœ¨æ ‡ç­¾ï¼Œå³æˆ‘ä»¬çŸ¥é“æ ·æœ¬é›†ä¸­æ¯ä¸€æ•°æ®ä¸æ‰€å±åˆ†ç±»çš„å¯¹åº”å…³ç³»ã€‚</li>
<li>è¾“å…¥æ²¡æœ‰æ ‡ç­¾çš„æ•°æ®åï¼Œå°†è¿™ä¸ªæ²¡æœ‰æ ‡ç­¾çš„æ•°æ®çš„æ¯ä¸ªç‰¹å¾ä¸æ ·æœ¬é›†ä¸­çš„æ•°æ®å¯¹åº”çš„ç‰¹å¾è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæå–æ ·æœ¬ä¸­ç‰¹å¾æœ€ç›¸è¿‘çš„æ•°æ®ï¼ˆæœ€è¿‘é‚»ï¼‰çš„åˆ†ç±»æ ‡ç­¾ã€‚</li>
<li>ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åªé€‰æ‹©æ ·æœ¬æ•°æ®é›†ä¸­å‰kä¸ªæœ€ç›¸ä¼¼çš„æ•°æ®ï¼Œè¿™å°±æ˜¯KNNç®—æ³•ä¸­Kçš„ç”±æ¥ï¼Œé€šå¸¸kæ˜¯ä¸å¤§äº20çš„æ•´æ•°ã€‚æœ€åï¼Œé€‰æ‹©kä¸ªæœ€ç›¸ä¼¼æ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„ç±»åˆ«ï¼Œä½œä¸ºæ–°æ•°æ®çš„åˆ†ç±»ã€‚</li>
</ul>
<h2 id="2knnç®—æ³•åˆ†æ">2.KNNç®—æ³•åˆ†æ</h2>
<p>é¢„æµ‹è¿‡ç¨‹ï¼šå¯¹äºä¸€ä¸ªéœ€è¦é¢„æµ‹çš„è¾“å…¥å‘é‡xï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è®­ç»ƒæ•°æ®é›†ä¸­å¯»æ‰¾kä¸ªä¸å‘é‡xæœ€è¿‘çš„å‘é‡çš„é›†åˆï¼Œç„¶åæŠŠxçš„ç±»åˆ«è¿›è¡Œé¢„æµ‹ï¼ŒæŠŠxçš„ç±»åˆ«é¢„æµ‹ä¸ºè¿™kä¸ªæ ·æœ¬ä¸­ç±»åˆ«æœ€å¤šçš„é‚£ä¸€ç±»<br>
<img src="https://s-hmily.github.io/post-images/1595388102943.png" alt="" loading="lazy"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼ŒÏ‰1ã€Ï‰2ã€Ï‰3åˆ†åˆ«ä»£è¡¨è®­ç»ƒé›†ä¸­çš„ä¸‰ä¸ªç±»åˆ«ã€‚å…¶ä¸­ï¼Œä¸xuæœ€ç›¸è¿‘çš„5ä¸ªç‚¹ï¼ˆk=5ï¼‰å¦‚å›¾ä¸­ç®­å¤´æ‰€æŒ‡ï¼Œå¾ˆæ˜æ˜¾ä¸å…¶æœ€ç›¸è¿‘çš„5ä¸ªç‚¹ä¸­æœ€å¤šçš„ç±»åˆ«ä¸ºÏ‰1ï¼Œå› æ­¤ï¼ŒKNNç®—æ³•å°†xuçš„ç±»åˆ«é¢„æµ‹ä¸ºÏ‰1ã€‚</p>
<p>ç®—æ³•æ‰§è¡Œçš„æ­¥éª¤ï¼š</p>
<p>è¾“å…¥ï¼šè®­ç»ƒæ•°æ®é›†</p>
<figure data-type="image" tabindex="1"><img src="https://s-hmily.github.io/post-images/1595388158811.png" alt="" loading="lazy"></figure>
<p>å…¶ä¸­ï¼šÂ <br>
<img src="https://s-hmily.github.io/post-images/1595388162236.png" alt="" loading="lazy"></p>
<p>ä¸ºnç»´çš„å®ä¾‹ç‰¹å¾å‘é‡ã€‚Â <br>
<img src="https://s-hmily.github.io/post-images/1595388168096.png" alt="" loading="lazy"></p>
<p>ä¸ºå®ä¾‹çš„ç±»åˆ«ï¼Œå…¶ä¸­ï¼Œi=1,2,â€¦,Nï¼Œé¢„æµ‹å®ä¾‹xã€‚</p>
<p>è¾“å‡ºï¼šé¢„æµ‹å®ä¾‹xæ‰€å±ç±»åˆ«yã€‚</p>
<p>ç®—æ³•æ‰§è¡Œæ­¥éª¤ï¼š</p>
<ol>
<li>
<p>æ ¹æ®ç»™å®šçš„è·ç¦»é‡åº¦æ–¹æ³•ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨æ¬§æ°è·ç¦»ï¼‰åœ¨è®­ç»ƒé›†Tä¸­æ‰¾å‡ºä¸xæœ€ç›¸è¿‘çš„kä¸ªæ ·æœ¬ç‚¹ï¼Œå¹¶å°†è¿™kä¸ªæ ·æœ¬ç‚¹æ‰€è¡¨ç¤ºçš„é›†åˆè®°ä¸ºN_k(x)ï¼›</p>
</li>
<li>
<p>æ ¹æ®å¦‚ä¸‹æ‰€ç¤ºçš„å¤šæ•°æŠ•ç¥¨çš„åŸåˆ™ç¡®å®šå®ä¾‹xæ‰€å±ç±»åˆ«yï¼š</p>
</li>
</ol>
<figure data-type="image" tabindex="2"><img src="https://s-hmily.github.io/post-images/1595388203338.png" alt="" loading="lazy"></figure>
<p>ä¸Šå¼ä¸­Iä¸ºæŒ‡ç¤ºå‡½æ•°ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://s-hmily.github.io/post-images/1595388211534.png" alt="" loading="lazy"></figure>
<h2 id="3å½±å“knnç®—æ³•çš„å› ç´ ">3.å½±å“KNNç®—æ³•çš„å› ç´ </h2>
<ul>
<li><strong>Kå€¼çš„é€‰æ‹©</strong>ï¼šKå€¼çš„ç¡®å®šä¸æ ·æœ¬æœ€ç»ˆçš„åˆ¤å®šç»“æœæœ‰å¾ˆå¤§çš„å…³ç³»ï¼›K å€¼å¤ªå°ä¼šä½¿å¾— KNN ç®—æ³•å®¹æ˜“è¿‡æ‹Ÿåˆã€‚åä¹‹ï¼Œå¤ªå¤§åˆ™ä¼šæ¬ æ‹Ÿåˆã€‚å› æ­¤ï¼Œä¸€èˆ¬é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼é€‰å– K å€¼ã€‚</li>
<li><strong>è·ç¦»çš„åº¦é‡</strong>ï¼šé€šè¿‡ä»€ä¹ˆæ ·çš„è·ç¦»ç†è®ºç¡®å®šæœ€è¿‘é‚»çš„æ ·æœ¬æ•°æ®ã€‚ä¸€èˆ¬ä½¿ç”¨æ¬§æ°è·ç¦»(æ¬§å‡ é‡Œå¾—è·ç¦»)ï¼›</li>
<li><strong>å†³ç­–è§„åˆ™</strong>ï¼šä»¥ä»€ä¹ˆæ ·çš„å†³ç­–è§„åˆ™æ¥ç¡®å®šæœ€ç»ˆçš„è¾“å‡ºç»“æœã€‚ å¦‚ä¸Šå›¾çš„å†³ç­–è§„åˆ™æ˜¯é€šè¿‡â€œå¤šæ•°è¡¨å†³æ³•â€å¯¹ç»“æœè¿›è¡Œåˆ†ç±»ã€‚<br>
åœ¨åˆ†ç±»é¢„æµ‹æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨â€œå¤šæ•°è¡¨å†³æ³•â€æˆ–â€œåŠ æƒå¤šæ•°è¡¨å†³æ³•â€ï¼›<br>
è€Œåœ¨åšå›å½’é¢„æµ‹æ—¶ï¼Œä¸€èˆ¬é‡‡ç”¨â€œå¹³å‡å€¼æ³•â€æˆ–â€œåŠ æƒå¹³å‡å€¼æ³•â€ï¼Œè¿™ä¹Ÿæ˜¯KNNåšåˆ†ç±»ä¸å›å½’æœ€ä¸»è¦çš„åŒºåˆ«ã€‚<br>
è¿™é‡Œæ‰€è¯´çš„åŠ æƒä¸€èˆ¬æƒ…å†µä¸‹é‡‡ç”¨æƒé‡å’Œè·ç¦»æˆåæ¯”çš„æ–¹å¼æ¥è®¡ç®—ã€‚</li>
</ul>
<h3 id="31kå€¼çš„é€‰æ‹©">3.1Kå€¼çš„é€‰æ‹©</h3>
<p>KNNç®—æ³•ä¸­åªæœ‰ä¸€ä¸ªè¶…å‚æ•°kï¼Œkå€¼çš„ç¡®å®šå¯¹KNNç®—æ³•çš„é¢„æµ‹ç»“æœæœ‰ç€è‡³å…³é‡è¦çš„å½±å“ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸‹kå€¼å¤§å°å¯¹ç®—æ³•ç»“æœçš„å½±å“ä»¥åŠä¸€èˆ¬æƒ…å†µä¸‹å¦‚ä½•é€‰æ‹©kå€¼ã€‚</p>
<p>å¦‚æœkå€¼æ¯”è¾ƒå°ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨è¾ƒå°çš„é¢†åŸŸå†…è®­ç»ƒæ ·æœ¬å¯¹å®ä¾‹è¿›è¡Œé¢„æµ‹ã€‚è¿™æ—¶ï¼Œç®—æ³•çš„è¿‘ä¼¼è¯¯å·®ï¼ˆApproximate Errorï¼‰ä¼šæ¯”è¾ƒå°ï¼Œå› ä¸ºåªæœ‰ä¸è¾“å…¥å®ä¾‹ç›¸è¿‘çš„è®­ç»ƒæ ·æœ¬æ‰ä¼šå¯¹é¢„æµ‹ç»“æœèµ·ä½œç”¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼šç®—æ³•çš„ä¼°è®¡è¯¯å·®æ¯”è¾ƒå¤§ï¼Œé¢„æµ‹ç»“æœä¼šå¯¹è¿‘é‚»ç‚¹ååˆ†æ•æ„Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¿‘é‚»ç‚¹æ˜¯å™ªå£°ç‚¹çš„è¯ï¼Œé¢„æµ‹å°±ä¼šå‡ºé”™ã€‚å› æ­¤ï¼Œkå€¼è¿‡å°å®¹æ˜“å¯¼è‡´KNNç®—æ³•çš„è¿‡æ‹Ÿåˆã€‚</p>
<p>åŒç†ï¼Œå¦‚æœkå€¼é€‰æ‹©è¾ƒå¤§çš„è¯ï¼Œè·ç¦»è¾ƒè¿œçš„è®­ç»ƒæ ·æœ¬ä¹Ÿèƒ½å¤Ÿå¯¹å®ä¾‹é¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ã€‚è¿™æ—¶å€™ï¼Œæ¨¡å‹ç›¸å¯¹æ¯”è¾ƒé²æ£’ï¼Œä¸ä¼šå› ä¸ºä¸ªåˆ«å™ªå£°ç‚¹å¯¹æœ€ç»ˆé¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ã€‚ä½†æ˜¯ç¼ºç‚¹ä¹Ÿååˆ†æ˜æ˜¾ï¼šç®—æ³•çš„è¿‘é‚»è¯¯å·®ä¼šåå¤§ï¼Œè·ç¦»è¾ƒè¿œçš„ç‚¹ï¼ˆä¸é¢„æµ‹å®ä¾‹ä¸ç›¸ä¼¼ï¼‰ä¹Ÿä¼šåŒæ ·å¯¹é¢„æµ‹ç»“æœäº§ç”Ÿå½±å“ï¼Œä½¿å¾—é¢„æµ‹ç»“æœäº§ç”Ÿè¾ƒå¤§åå·®ï¼Œæ­¤æ—¶æ¨¡å‹å®¹æ˜“å‘ç”Ÿæ¬ æ‹Ÿåˆã€‚</p>
<p>å› æ­¤ï¼Œåœ¨å®é™…å·¥ç¨‹å®è·µä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬é‡‡ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼é€‰å–kå€¼ã€‚é€šè¿‡ä»¥ä¸Šåˆ†æå¯çŸ¥ï¼Œä¸€èˆ¬kå€¼é€‰å¾—æ¯”è¾ƒå°ï¼Œæˆ‘ä»¬ä¼šåœ¨è¾ƒå°èŒƒå›´å†…é€‰å–kå€¼ï¼ŒåŒæ—¶æŠŠæµ‹è¯•é›†ä¸Šå‡†ç¡®ç‡æœ€é«˜çš„é‚£ä¸ªç¡®å®šä¸ºæœ€ç»ˆçš„ç®—æ³•è¶…å‚æ•°kã€‚</p>
<h3 id="32è·ç¦»çš„åº¦é‡">3.2è·ç¦»çš„åº¦é‡</h3>
<p>æ ·æœ¬ç©ºé—´å†…çš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»é‡åº¦è¡¨ç¤ºä¸¤ä¸ªæ ·æœ¬ç‚¹ä¹‹é—´çš„ç›¸ä¼¼ç¨‹åº¦ï¼šè·ç¦»è¶ŠçŸ­ï¼Œè¡¨ç¤ºç›¸ä¼¼ç¨‹åº¦è¶Šé«˜ï¼›åä¹‹ï¼Œç›¸ä¼¼ç¨‹åº¦è¶Šä½ã€‚</p>
<p>å¸¸ç”¨çš„è·ç¦»é‡åº¦æ–¹å¼åŒ…æ‹¬ï¼š</p>
<p>é—µå¯å¤«æ–¯åŸºè·ç¦»</p>
<p>æ¬§æ°è·ç¦»</p>
<p>æ›¼å“ˆé¡¿è·ç¦»</p>
<p>åˆ‡æ¯”é›ªå¤«è·ç¦»</p>
<p>ä½™å¼¦è·ç¦»</p>
<p>ä¸€èˆ¬æœºå™¨å­¦ä¹ ä½¿ç”¨çš„æ˜¯æ¬§æ°è·ç¦»ï¼Œå…·ä½“å…¬å¼å¦‚ä¸‹å›¾ï¼š<br>
å¹³é¢å‡ ä½•è·ç¦»å…¬å¼ï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388350432.png" alt="" loading="lazy"><br>
ç«‹ä½“å‡ ä½•è·ç¦»å…¬å¼ï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388373349.png" alt="" loading="lazy"><br>
æœºå™¨å­¦ä¹ ä¸­é«˜çº¬åº¦æ ·æœ¬çš„æ¬§æ‹‰è·ç¦»è¡¨è¾¾ï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388486154.png" alt="" loading="lazy"><br>
æœºå™¨å­¦ä¹ ä¸­é«˜çº¬åº¦æ ·æœ¬çš„æ¬§æ‹‰è·ç¦»è¡¨è¾¾åŒ–ç®€æˆï¼š<br>
<img src="https://s-hmily.github.io/post-images/1595388542389.png" alt="" loading="lazy"></p>
<h2 id="4knnä»£ç çš„å®ç°">4.KNNä»£ç çš„å®ç°</h2>
<pre><code>import numpy as np
import matplotlib.pyplot as plt
from collections import Counter
from math import sqrt

#åŸå§‹æ ¼å¼çš„æ•°æ®
raw_data_X = [[3.393533211, 2.331273381],
              [3.110073483, 1.781539638],
              [1.343808831, 3.368360954],
              [3.582294042, 4.679179110],
              [2.280362439, 2.866990263],
              [7.423436942, 4.696522875],
              [5.745051997, 3.533989803],
              [9.172168622, 2.511101045],
              [7.792783481, 3.424088941],
              [7.939820817, 0.791637231]
             ]
raw_data_y = [0, 0, 0, 0, 0, 1, 1, 1, 1, 1]


#è½¬åŒ–ä¸ºæ–¹ä¾¿numpyå¤„ç†çš„ndarrayç±»å‹æ•°æ®
X_train=np.array(raw_data_X )
y_train=np.array(raw_data_y)

#æŠŠè®­ç»ƒæ•°æ®ç”¨æ•£ç‚¹å›¾ç”»å‡ºæ¥ï¼Œå…¶ä¸­y_train==0,0è¡¨ç¤ºå–å‡ºy_trainä¸­ç±»åˆ«ä¸º0çš„æ ·æœ¬ç‚¹çš„ç¬¬1åˆ—
#y_train==0,1è¡¨ç¤ºå–å‡ºy_trainä¸­ç±»åˆ«ä¸º0çš„æ ·æœ¬ç‚¹çš„ç¬¬2åˆ—ï¼Œä»¥æ­¤ç±»æ¨
plt.scatter(X_train[y_train==0,0],X_train[y_train==0,1],color='r',s=120)
plt.scatter(X_train[y_train==1,0],X_train[y_train==1,1],color='b',s=120)


#xè¡¨ç¤ºæ–°æ¥çš„æ ·æœ¬ç‚¹ï¼Œå¹¶å°†å…¶ä¹Ÿç”»åœ¨æ•£ç‚¹å›¾ä¸Š
x=np.array([5.876543210,2.491234560])
plt.scatter(x[0],x[1],color='g',s=120)

#distances=[]
#for x_train in X_train:
#    d=sqrt(np.sum((x-x_train)**2))
#    distances.append(d)


#35--38è¡Œçš„å¾ªç¯è¯­å¥å¯ä»¥ç”¨ç¬¬43è¡Œçš„åˆ—è¡¨è¡¨è¾¾å¼å–ä»£ï¼Œ
#æ­¤å¤„ä¸ºæ±‚æ–°æ¥æ ·æœ¬ç‚¹ä¸è®­ç»ƒæ ·æœ¬ä¸­æ‰€æœ‰ç‚¹çš„æ¬§æ°è·ç¦»
distances=[sqrt(np.sum((x-x_train)**2)) for x_train in X_train]
print(distances)
print('===========================')

#ç”¨argsortæ–¹æ³•æ±‚è·ç¦»å¯¹åº”çš„ç´¢å¼•å€¼
nearest=np.argsort(distances)
print(nearest)

k=5

#æ±‚è·ç¦»æ–°æ¥æ ·æœ¬ç‚¹è·ç¦»æœ€è¿‘çš„Kä¸ªæ ·æœ¬çš„ç±»åˆ«åˆ†åˆ«æ˜¯ä»€ä¹ˆã€0 or 1ã€‘
topK_y=[y_train[i] for i in nearest[:k]]
print('===========================')
print(topK_y)

#ç”¨Counteræ–¹æ³•åˆ†åˆ«ç»Ÿè®¡å‡ºç±»åˆ«ä¸º0å’Œ1çš„ä¸ªæ•°
votes=Counter(topK_y)
print(votes)

#ç”¨most_commonæ±‚å‡ºç¥¨æ•°æœ€å¤šçš„é‚£ä¸ªæ ·æœ¬ç‚¹çš„ç±»åˆ«
print(votes.most_common(1)[0][0])
</code></pre>
<h2 id="5knnç®—æ³•çš„åº”ç”¨åŸºäºsklearnè‡ªå¸¦çš„æ•°æ®">5.KNNç®—æ³•çš„åº”ç”¨ï¼ˆåŸºäºsklearnè‡ªå¸¦çš„æ•°æ®ï¼‰</h2>
<ul>
<li>åŸºäºsklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®</li>
<li>åŸºäºmakeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†</li>
</ul>
<h3 id="51é’ˆå¯¹ç”¨sklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®">5.1é’ˆå¯¹ç”¨sklearnè‡ªå¸¦çš„çº¢é…’æ•°æ®</h3>
<pre><code>import numpy as np
import matplotlib.pyplot as plt

from sklearn.datasets import make_blobs
from sklearn.neighbors import KNeighborsClassifier

#å¯¼å…¥sklearnåŒ…ä¸­è‡ªå¸¦çš„çº¢é…’æ•°æ®é›†æ‰€éœ€æ¨¡å—
from sklearn.datasets import load_wine

#å¯¼å…¥æ•°æ®é›†æ‹†åˆ†å·¥å…·åŒ…
from sklearn.model_selection import train_test_split

#å¯¼å…¥å…¥sklearnåŒ…ä¸­è‡ªå¸¦çš„çº¢é…’æ•°æ®é›†
wine_dataset=load_wine()

#æŸ¥çœ‹çº¢é…’æ•°æ®é›†ä¸­çš„é”®ã€‚å…¶å®çº¢é…’æ•°æ®é›†æœ¬è´¨ä¸Šæ˜¯ä¸€ç§Bunchå¯¹è±¡
#ã€æœ‰ç‚¹ç±»ä¼¼äºpythonä¸­çš„å­—å…¸ã€‘ï¼Œå®ƒåŒ…æ‹¬é”®ï¼ˆkeysï¼‰å’Œæ•°å€¼(values)
print('çº¢é…’æ•°æ®é›†ä¸­çš„KEYé”®ï¼š{}'.format(wine_dataset.keys()))

#æŸ¥çœ‹çº¢é…’æ•°æ®é›†ä¸­çš„æ ·æœ¬æ•°
#print('æ•°æ®æ¦‚å†µ:{}'.format(wine_dataset['data'].shape))

#æŸ¥çœ‹çº¢é…’æ•°æ®é›†ä¸­çš„ç®€å•æè¿°
#print(wine_dataset['DESCR'])

#æŠŠçº¢é…’æ•°æ®é›†ä¸­çš„æ•°æ®æ‹†åˆ†ä¸ºè®­ç»ƒæ•°æ®å’Œæµ‹è¯•æ•°æ®ï¼Œä»¥åŠå…¶ç›¸åº”çš„ç±»åˆ«
X_train,X_test,y_train,y_test=train_test_split(wine_dataset['data'],wine_dataset['target'],random_state=2)
print('X_train shape:{}'.format(X_train.shape))
print('X_test shape:{}'.format(X_test.shape))


knn=KNeighborsClassifier(n_neighbors=4)
print('ç”¨æ¨¡å‹å¯¹ç»™å®šçš„è®­ç»ƒæ•°æ®è¿›è¡Œæ‹Ÿåˆã€å­¦ä¹ ï¼Œè®­ç»ƒã€‘')

#æŠŠè®­ç»ƒæ•°æ®å–‚ç»™knnï¼Œå¸®åŠ©å…¶æ‹Ÿåˆå‡ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹
knn.fit(X_train,y_train)
print(knn)

print('æ¨¡å‹è®­ç»ƒå¥½ä»¥åç»è¿‡æµ‹è¯•æ•°æ®é›†æµ‹è¯•åçš„å¾—åˆ†:{:.2f}'.format(knn.score(X_test,y_test)))

#è¾“å…¥ä¸€ä¸ªæ–°çš„æ•°æ®ç‚¹
X_new=np.array([[13.2,2.77,2.51,18.5,96.6,1.04,2.55,0.57,1.47,6.2,1.05,3.33,820]])

prediction=knn.predict(X_new)
print('=======================')

#ç»™å‡ºæ–°æ ·æœ¬çš„åˆ†ç±»ç»“æœ
print('æ–°æ‹¿åˆ°çš„çº¢é…’ç»è¿‡æœ¬æ¨¡å‹é¢„æµ‹åçš„ç±»åˆ«æ˜¯:{}'.format(wine_dataset['target_names'][prediction]))
</code></pre>
<h3 id="52é’ˆå¯¹ç”¨makeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†">5.2é’ˆå¯¹ç”¨makeæ–¹æ³•ç”Ÿæˆçš„æ•°æ®é›†</h3>
<pre><code>import numpy as np
import matplotlib.pyplot as plt

#å¯¼å…¥sklearnåŒ…ä¸­ç”¨makeæ–¹æ³•ç”Ÿæˆèšç±»ç”¨çš„æ•°æ®é›†æ‰€éœ€è¦ç”¨åˆ°çš„æ¨¡å—
from sklearn.datasets import make_blobs

#å¯¼å…¥sklearnåŒ…ä¸­KNNåˆ†ç±»ç®—æ³•æ‰€éœ€æ¨¡å—
from sklearn.neighbors import KNeighborsClassifier


#ç”¨make_blobsæ–¹æ³•ç”Ÿæˆæ•°æ®é›†ï¼Œæ ·æœ¬æ•°ä¸º200ï¼Œæ ·æœ¬ç±»åˆ«ä¸º2ï¼Œéšæœºç”Ÿæˆå™¨çš„ç§å­æ•°ä¸º8
data=make_blobs(n_samples=200,centers=2,random_state=8)

#æŠŠæ•°æ®é›†ä¸­çš„è®­ç»ƒæ•°æ®åŠè®­ç»ƒæ•°æ®çš„ç±»åˆ«åˆ†åˆ«èµ‹ç»™XåŠy
X,y=data

#ç”»æ•£ç‚¹å›¾ï¼Œå…¶ä¸­c=yçš„ä½œç”¨æ˜¯è®©ä¸¤ç±»æ ·æœ¬åˆ†åˆ«æ˜¾ç¤ºä¸åŒé¢œè‰²ä»¥ä¾¿äºåŒºåˆ†ï¼Œcmapæ˜¯é¢œè‰²æ˜ å°„è¡¨å±æ€§
plt.scatter(X[:,0],X[:,1],c=y,cmap=plt.cm.winter)

#ç”ŸæˆKNNåˆ†ç±»å™¨çš„ä¸€ä¸ªå®ä¾‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯KNNæœºå™¨å­¦ä¹ ç®—æ³•
clf=KNeighborsClassifier()

#æŠŠè®­ç»ƒæ•°æ®å–‚ç»™clfï¼Œå¸®åŠ©å…¶æ‹Ÿåˆå‡ºä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹
clf.fit(X,y)



x_min,x_max=X[:,0].min()-1,X[:,0].max()+1
y_min,y_max=X[:,1].min()-1,X[:,1].max()+1

#ç”Ÿæˆç½‘ç»œæ•°æ®ï¼Œç›®çš„æ˜¯ä¸ºä¸‹é¢ç”»åˆ†ç•Œçº¿çš„è¯­å¥pcolormeshæä¾›æ•°æ®
xx,yy=np.meshgrid(np.arange(x_min,x_max,0.02),
            np.arange(y_min,y_max,0.02))

#np.c_çš„ä½œç”¨æ˜¯æŒ‰è¡Œè¿æ¥ä¸¤ä¸ªçŸ©é˜µï¼Œravel()ä½œç”¨æ˜¯ä½¿çŸ©é˜µé™ç»´ï¼Œåœ¨è¿™é‡Œå°±æ˜¯å±•å¼€æˆä¸€ä¸ªä¸€ç»´çŸ©é˜µ
Z=clf.predict(np.c_[xx.ravel(),yy.ravel()])

#é€šè¿‡reshapeæ–¹æ³•ä½¿Zçš„ç»´åº¦å’Œxxä¸€è‡´
Z=Z.reshape(xx.shape)

#ç”»åˆ†ç•Œçº¿
plt.pcolormesh(xx,yy,Z,cmap=plt.cm.Pastel1)
plt.scatter(X[:,0],X[:,1],c=y,cmap=plt.cm.winter)

plt.scatter(6.75,5.25,c='r',s=200,marker='*')

#ç»™å‡ºåˆ†ç±»ç»“æœ
print('æ–°æ•°æ®ç‚¹çš„åˆ†ç±»ç»“æœæ˜¯ï¼š',clf.predict([[6.75,5.25]]))

#ç»™å‡ºåˆ†ç±»æ­£ç¡®ç‡ï¼Œä½†è¿™ä¸ªä¾‹å­ä¸­çš„æ•°æ®é›†ç”±äºæˆ‘æ²¡æœ‰æŠŠæ•°æ®è¿›ä¸€æ­¥
#åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œæ‰€ä»¥å…¶å®ç»“æœæ„ä¹‰ä¸å¤ªå¤§
print('è¯¥æ¨¡å‹çš„æ­£ç¡®ç‡æ˜¯:{:.2f}'.format(clf.score(X,y)))
</code></pre>

        </div>
        
        <div class="prev-post">
            ä¸Šä¸€ç¯‡
            <a href="https://s-hmily.github.io/post/k-means-ju-lei-suan-fa-yuan-li-ji-qi-shi-xian/">
                K-meansèšç±»ç®—æ³•åŸç†åŠå…¶å®ç°
            </a>
        </div>
        
        
        <div class="next-post">
            ä¸‹ä¸€ç¯‡
            <a href="https://s-hmily.github.io/post/juan-ji-shen-jing-wang-luo-de-ying-yong-shi-xian-mnist-shou-xie-ti-shi-bie/">
                å·ç§¯ç¥ç»ç½‘ç»œçš„åº”ç”¨-å®ç°MNISTæ‰‹å†™ä½“è¯†åˆ«
            </a>
        </div>
        
    </div>
    </div>
</body>
<script>
    var t_img; // å®šæ—¶ï¿½?
    var isLoad = true; // æ§åˆ¶å˜é‡
    isImgLoad(function () {
        // åŠ è½½å®Œæˆ
        $('.postdetailimg').css("display", "block");
    });
    // åˆ¤æ–­å›¾ç‰‡åŠ è½½çš„å‡½ï¿½?
    function isImgLoad(callback) {
        // æ³¨æ„æˆ‘çš„å›¾ç‰‡ç±»åéƒ½æ˜¯coverï¼Œå› ä¸ºæˆ‘ï¿½?éœ€è¦ï¿½?ï¿½ç†coverã€‚å…¶å®ƒå›¾ç‰‡å¯ä»¥ä¸ç®¡ï¿½?
        // æŸ¥æ‰¾æ‰€æœ‰å°é¢å›¾ï¼Œè¿­ä»£ï¿½?ï¿½ç†
        $('.postdetailimg').each(function () {
            // æ‰¾åˆ°ï¿½?0å°±å°†isLoadè®¾ä¸ºfalseï¼Œå¹¶é€€å‡ºeach
            if (this.height === 0) {
                isLoad = false;
                return false;
            }
        });
        // ä¸ºtrueï¼Œæ²¡æœ‰å‘ç°ä¸º0çš„ã€‚åŠ è½½å®Œï¿½?
        if (isLoad) {
            clearTimeout(t_img); // æ¸…é™¤å®šæ—¶ï¿½?
            // å›è°ƒå‡½æ•°
            callback();
            // ä¸ºfalseï¼Œå› ä¸ºæ‰¾åˆ°äº†æ²¡æœ‰åŠ è½½å®Œæˆçš„å›¾ï¼Œå°†è°ƒç”¨å®šæ—¶å™¨é€’å½’
        } else {
            isLoad = true;
            t_img = setTimeout(function () {
                isImgLoad(callback); // é€’å½’ï¿½?ï¿½?
            }, 500); // æˆ‘è¿™é‡Œï¿½?ï¿½ç½®çš„æ˜¯500ï¿½?ç§’å°±ï¿½?æä¸€æ¬¡ï¼Œï¿½?ä»¥è‡ªå·±è°ƒï¿½?
        }
    }

    //æ–‡ç« é˜…è¯»çƒ­åº¦
    var pl = $("#pl").html();
    var rootaddr = $("#rootaddr").html();
    pl = pl.replace(rootaddr, "");
    $("#hotnum").attr('id', pl);
</script>
    <div name="comment" style="background: white;margin-top:100px">
        <div class="commentcontainer">
            
            <p>è¯·åˆ°å®¢æˆ·ç«¯â€œä¸»é¢˜--è‡ªå®šä¹‰é…ç½®--valineâ€ä¸­å¡«å…¥IDå’ŒKEY</p>
            
        </div>
    </div>
    </div>
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="240" height="250" class="live2d"></canvas>
    </div>
    <div id="codeCopyText" style="display: none">ä»£ç å¤åˆ¶æˆåŠŸäº†å“¦</div>
    <div id="domainname" style="display:none">https://s-hmily.github.io</div>
    </body>
    <script src="https://s-hmily.github.io/media/js/post.js"></script>
    <script>
        //å¯»æ‰¾æ‰€æœ‰codeæ ‡ç­¾ï¼ŒåŠ å¤åˆ¶æŒ‰é’®é¸­ï¼(è¡Œå†…ä»£ç é™¤å¤–)
        var codes = document.getElementsByTagName('code');
        if (codes.length) {
            for (var i = 0; i < codes.length; i++) {
                //é«˜åº¦/è¡Œé«˜=æ–‡æœ¬è¡Œæ•°
                // var rowNum=Math.round(codes[i].height()/parseFloat(codes[i].css('line-height')));
                // console.log("å½“å‰æœ‰"+rowNum+"è¡Œ");
                var code_id = "code_id_" + i;
                codes[i].setAttribute("id", code_id);
                var ci = "#" + code_id;
                var codedot = $(ci);
                var rowNum = Math.round(codedot.height() / parseFloat(codedot.css('line-height')));
                if (rowNum <= 1) continue;
                var btn = document.createElement("button");
                btn.setAttribute("class", "copybt");
                btn.setAttribute("data-clipboard-target", "#" + code_id);
                btn.innerHTML = 'å¤åˆ¶ä»£ç ';
                codes[i].parentNode.insertBefore(btn, codes[i]);
            }
        };
        var cop = new ClipboardJS('.copybt');
        var codeCopyText = $("#codeCopyText").html();
        cop.on('success', function (e) {
            alert(codeCopyText);
            e.clearSelection();
        });
        cop.on('error', function (e) {
            alert("çŸ®æ²¹ï¼Œå¤åˆ¶å¤±è´¥äº†...æ‰‹åŠ¨å¤åˆ¶å§å‹‡å£«ï¼");
            e.clearSelection();
        });
    </script>
    
    <script type="text/javascript">
        var message_Path = '/live2d/'
        var home_Path = document.getElementById("domainname").innerHTML+"/"; //æ­¤å¤„ä¿®æ”¹ä¸ºä½ çš„åŸŸåï¼Œå¿…é¡»å¸¦æ–œæ 
    </script>
    <script type="text/javascript" src="https://s-hmily.github.io/media/live2d/js/live2d.js"></script>
    <script type="text/javascript" src="https://s-hmily.github.io/media/live2d/js/message.js"></script>
    <script type="text/javascript">
        loadlive2d("live2d", "https://s-hmily.github.io/media/live2d/assets/tororo.model.json");
    </script>
    
<script>
$(function () {
    $('.toggleContainer').click(function(){$('html,body').animate({scrollTop: '0px'}, 800);});
	$(window).scroll(function() {
        var st = $(window).scrollTop();
        if(st > 30){
            $(".toggleContainer").fadeIn(400);
        }else{
            $(".toggleContainer").fadeOut(100);
        }
	});
});
</script>

<script>
        var bgchoice=$('#bgchoice').html();
        var bg = $('#bg');
        var bgurl = document.getElementById("bgurl").innerHTML;
        if(bgchoice=='default')
            for (var i = 0; i < 3; i++)
                bgurl = bgurl.replace("\\", "/");
        bg.css("background", "url('" + bgurl + "')");
</script>
